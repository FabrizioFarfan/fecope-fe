import{u as v,r,d as j,j as e,M as N,e as y,h as I,g as w}from"./index-BkvH5lNM.js";const E=localStorage.getItem("token");function T(){const x=v(),u=r.useRef(),l=r.useRef(),n=r.useRef(),o=r.useRef(),c=r.useRef(),i=r.useRef(),d=r.useRef(),{eventoId:f}=j(),[m,b]=r.useState(null);r.useEffect(()=>{async function p(t){try{const s=await fetch(`http://localhost:8081/v0/evento/${t}`);if(s.ok){const a=await s.json();if(console.log(a),a.imagen){const g=`data:${y(a.imageType||"image/jpeg")};base64,${a.imagen}`;b(g)}l.current&&(l.current.value=a.titulo),n.current&&(n.current.value=a.lugar),o.current&&(o.current.value=a.descripcion),c.current&&(c.current.value=a.contenido),i.current&&(i.current.value=a.dataInicio),d.current&&(d.current.value=a.dataFinal)}else console.error("Error al obtener el evento:",s.statusText)}catch(s){console.error("Network error:",s)}}p(f)},[]);async function h(p){p.preventDefault();const t=new FormData;if(u.current.files.length===0){const a=I(m,"imagen.jpg");t.append("imagen",a)}else t.append("imagen",u.current.files[0]);t.append("titulo",l.current.value),t.append("lugar",n.current.value),t.append("descripcion",o.current.value),t.append("contenido",c.current.value),t.append("dataInicio",i.current.value),t.append("dataFinal",d.current.value),console.log(t),fetch(`http://localhost:8081/v1/evento/${f}`,{method:"PUT",headers:{Authorization:`Bearer ${E}`,"X-XSRF-TOKEN":w()},credentials:"include",body:t}).then(s=>{s.status===200?(alert("Evento editado con éxito"),x(-1)):alert("Ha occurrido un error")}).catch(s=>{alert("Ha occurrido un error"),console.error("Network error:",s)})}return e.jsxs("div",{className:"text-dark-red max-w-lg mx-auto p-6 bg-white  rounded-lg",children:[e.jsxs("div",{className:"flex justify-start gap-20",children:[e.jsx(N,{className:"h-8 w-8 hover:text-dark-red text-true-red cursor-pointer",onClick:()=>x(-1)}),e.jsx("h2",{className:"text-xl font-bold my-4",children:"Edita Evento"})]}),e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"mb-4",children:[m&&e.jsxs("div",{className:"mb-4 grid",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:m,alt:"Evento Imagen",className:"rounded-lg h-[150px] w-[150-px]"})}),e.jsx("div",{className:"flex justify-center",children:e.jsx("p",{className:"text-xs font-extralight",children:"Imagen actual del evento(si desea abajo puede modificarla)"})})]}),e.jsx("label",{className:"block text-sm font-bold mb-2",children:"Nueva Imagen del Evento"}),e.jsx("input",{type:"file",className:"w-full px-3 py-2 border rounded-lg",accept:"image/*",ref:u})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-bold mb-2",children:"Título del Evento(Máx. 70 letras)"}),e.jsx("input",{type:"text",placeholder:"Título",className:"w-full px-3 py-2 border rounded-lg",ref:l})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-bold mb-2",children:"Lugar"}),e.jsx("input",{type:"text",placeholder:"Lugar",className:"w-full px-3 py-2 border rounded-lg",ref:n})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-bold mb-2",children:"Inicio del Evento"}),e.jsx("input",{type:"datetime-local",className:"w-full px-3 py-2 border rounded-lg",ref:i})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-bold mb-2",children:"Final del Evento"}),e.jsx("input",{type:"datetime-local",className:"w-full px-3 py-2 border rounded-lg",ref:d})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-bold mb-2",children:"Descripción del Evento(Máx. 150 letras)"}),e.jsx("textarea",{placeholder:"Descripción",className:"w-full px-3 py-2 border rounded-lg",ref:o})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-bold mb-2",children:"Contenido del Evento"}),e.jsx("textarea",{placeholder:"Contenido",className:"w-full px-3 py-2 border rounded-lg",ref:c})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{type:"submit",className:"bg-true-red text-true-white px-4 py-2 rounded-lg shadow hover:bg-dark-red transition duration-300",children:"Edita Evento"})})]})]})}export{T as default};
