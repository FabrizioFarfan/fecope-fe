import{u as g,r,d as h,j as e,M as b,e as N,h as j,g as v}from"./index-BkvH5lNM.js";const y=localStorage.getItem("token");function I(){const u=g(),l=r.useRef(),o=r.useRef(),i=r.useRef(),c=r.useRef(),{noticiaId:m}=h(),[n,x]=r.useState(null);r.useEffect(()=>{async function d(a){try{const t=await fetch(`http://localhost:8081/v0/noticia/${a}`);if(t.ok){const s=await t.json();if(console.log(s),s.imagen){const f=`data:${N(s.imageType||"image/jpeg")};base64,${s.imagen}`;x(f)}o.current&&(o.current.value=s.titulo),i.current&&(i.current.value=s.descripcion),c.current&&(c.current.value=s.contenido)}else console.error("Error al obtener el noticia:",t.statusText)}catch(t){console.error("Network error:",t)}}d(m)},[]);async function p(d){d.preventDefault();const a=new FormData;if(l.current.files.length===0){const s=j(n,"imagen.jpg");a.append("imagen",s)}else a.append("imagen",l.current.files[0]);a.append("titulo",o.current.value),a.append("descripcion",i.current.value),a.append("contenido",c.current.value),console.log(a),fetch(`http://localhost:8081/v1/noticia/${m}`,{method:"PUT",headers:{Authorization:`Bearer ${y}`,"X-XSRF-TOKEN":v()},credentials:"include",body:a}).then(t=>{t.status===200?(alert("Noticia editada con éxito"),u(-1)):alert("Ha occurrido un error")}).catch(t=>{alert("Ha occurrido un error"),console.error("Network error:",t)})}return e.jsxs("div",{className:"text-dark-red max-w-lg mx-auto p-6 bg-white  rounded-lg",children:[e.jsxs("div",{className:"flex justify-start gap-20",children:[e.jsx(b,{className:"h-8 w-8 hover:text-dark-red text-true-red cursor-pointer",onClick:()=>u(-1)}),e.jsx("h2",{className:"text-xl font-bold my-4",children:"Edita Noticia"})]}),e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"mb-4",children:[n&&e.jsxs("div",{className:"mb-4 grid",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:n,alt:" Noticia Imagen",className:"rounded-lg h-[150px] w-[150-px]"})}),e.jsx("div",{className:"flex justify-center",children:e.jsx("p",{className:"text-xs font-extralight",children:"Imagen actual de la noticia(si desea abajo puede modificarla)"})})]}),e.jsx("label",{className:"block text-sm font-bold mb-2",children:"Nueva Imagen de la Noticia"}),e.jsx("input",{type:"file",className:"w-full px-3 py-2 border rounded-lg",accept:"image/*",ref:l})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-bold mb-2",children:"Título de la Noticia(Máx. 70 letras)"}),e.jsx("input",{type:"text",placeholder:"Título",className:"w-full px-3 py-2 border rounded-lg",ref:o})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-bold mb-2",children:"Descripción de la Noticia(Máx. 150 letras)"}),e.jsx("textarea",{placeholder:"Descripción",className:"w-full px-3 py-2 border rounded-lg",ref:i})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-bold mb-2",children:"Contenido del Noticia"}),e.jsx("textarea",{placeholder:"Contenido",className:"w-full px-3 py-2 border rounded-lg",ref:c})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{type:"submit",className:"bg-true-red text-true-white px-4 py-2 rounded-lg shadow hover:bg-dark-red transition duration-300",children:"Edita Noticia"})})]})]})}export{I as default};
