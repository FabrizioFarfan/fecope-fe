import{u as x,r as o,d as g,j as e,M as f,e as h,h as b,g as j}from"./index-twekFU8-.js";const N=localStorage.getItem("token");function w(){const c=x(),n=o.useRef(),s=o.useRef(),{diasporaId:d}=g(),[i,m]=o.useState(null);o.useEffect(()=>{async function l(a){try{const t=await fetch(`http://localhost:8081/v0/partner/${a}`);if(t.ok){const r=await t.json();if(console.log(r),r.imagen){const p=`data:${h(r.imageType||"image/jpeg")};base64,${r.imagen}`;m(p)}s.current&&(s.current.value=r.titulo)}else console.error("Error al obtener el partner:",t.statusText)}catch(t){console.error("Network error:",t)}}l(d)},[]);async function u(l){l.preventDefault();const a=new FormData;if(a.append("titulo",s.current.value),a.append("link",""),n.current.files.length===0){const r=b(i,"imagen.jpg");a.append("imagen",r)}else a.append("imagen",n.current.files[0]);a.append("diaspora",!0),console.log(a),fetch(`http://localhost:8081/v1/partner/${d}`,{method:"PUT",headers:{Authorization:`Bearer ${N}`,"X-XSRF-TOKEN":j()},credentials:"include",body:a}).then(t=>{t.status===200?(alert("Diáspora editada con éxito"),c(-1)):alert("Ha occurrido un error")}).catch(t=>{alert("Ha occurrido un error"),console.error("Network error:",t)})}return e.jsxs("div",{className:"text-dark-red max-w-lg mx-auto p-6 bg-white  rounded-lg",children:[e.jsxs("div",{className:"flex justify-start gap-20",children:[e.jsx(f,{className:"h-8 w-8 hover:text-dark-red text-true-red cursor-pointer",onClick:()=>c("/admin")}),e.jsx("h2",{className:"text-xl font-bold my-4",children:"Edita Diáspora"})]}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Nombre(Máx. 70 letras)"}),e.jsx("input",{type:"text",placeholder:"Nombre",className:"w-full px-3 py-2 border rounded-lg",ref:s,required:!0})]})," ",e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Foto Evento"}),e.jsx("input",{type:"file",className:"w-full px-3 py-2 border rounded-lg",accept:"image/*",ref:n})]}),i&&e.jsxs("div",{className:"mb-4 grid",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:i,alt:" Noticia Imagen",className:"rounded-lg h-[150px] w-[150-px]"})}),e.jsx("div",{className:"flex justify-center",children:e.jsx("p",{className:"text-xs font-extralight",children:"Imagen actual del logo(si desea puede modificarla)"})})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{type:"submit",className:"bg-true-red text-true-white px-4 py-2 rounded-lg shadow hover:bg-dark-red transition duration-300",children:"Edita Diáspora"})})]})]})}export{w as default};
